{% extends "admin/base.html" %}
{% from "bootstrap/pagination.html" import render_pagination %}

{% from "common/_macro.html" import static %}
{% block head %}

    <script src="{{ static("admin/js/post_list.js") }}"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <link rel="stylesheet" href="{{ static("album/viewer/css/viewer.css") }}">
    <link rel="stylesheet" href="{{ static("album/viewer/css/main.css") }}">
{% endblock %}

{% block content %}
    <div class="main_content" id="demo">
        <!--具体内容盒子               -->
        <blockquote class="layui-elem-quote news_search">
            <button class="layui-btn layui-btn-danger" id="group-del">批量删除</button>
            <div style="float: right">
                <div class="layui-inline">
                    <div class="layui-input-inline">
                        <input value="" placeholder="请输入标题的关键字" class="layui-input search_input" type="text"
                               name="post_name"
                        >
                    </div>
                    <a class="ui brown button search_btn" v-on:click="Search"><i class="search icon"></i></a>
                </div>

            </div>
        </blockquote>

        <div class="posts-box" id="jinjia">
            <table class="layui-table">
                <colgroup>
                    <col width="150">
                    <col width="200">
                    <col>
                </colgroup>
                <thead>
                <tr>
                    <th>
                        <button id="checkAll" class="ui basic button"><i class="check square icon"></i>
                            全选
                        </button>
                    </th>
                    <th>标题</th>
                    <th>内容</th>
                    <th>用户名</th>
                    <th>邮箱</th>
                    <th>发表时间</th>
                    <th>操作</th>
                </tr>
                </thead>
                <tbody>
                {% for post in posts.items %}
                    <tr data-post-id="{{ post.id }}">
                        <td><input type="checkbox" data-post-id="{{ post.id }}"></td>
                        <td>
                            <a href="{{ url_for("admin.post_detail",_id=post.id) }} " target="_blank">{{ post.title|truncate(20) }}</a>
                        </td>
                        <td>
                            {{ post.content|striptags|truncate(40) }}
                        </td>
                        <td>{{ post.author.username }}</td>
                        <td>{{ post.author.email }}</td>
                        <td>{{ post.create_time }}</td>
                        <td>
                            <button class="layui-btn layui-btn-danger layui-btn-xs del-btn" data-id="{{ post.id }}">
                                <i class="layui-icon layui-icon-delete"></i>删除
                            </button>
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
            {{ render_pagination(posts) }}
        </div>

        <div class="posts-box" id="vue">
            <table class="layui-table">
                <colgroup>
                    <col width="150">
                    <col width="200">
                    <col>
                </colgroup>
                <thead>
                <tr>
                    <th>标题</th>
                    <th>内容</th>
                    <th>用户名</th>
                    <th>邮箱</th>
                    <th>发表时间</th>
                    <th>操作</th>
                </tr>
                </thead>
                <tbody>
                <tr v-for="post in posts">
                    <td>
                        <a href="#" target="_blank" v-html="post.title"></a>
                    </td>
                    <td>
                        <a href="#" title="#" v-html="post.content"></a>
                    </td>
                    <td>[[post.username]]</td>
                    <td>[[post.email]]</td>
                    <td>[[post.create_time]]</td>

                    <td>
                        <button class="layui-btn layui-btn-danger layui-btn-xs del-btn" :post_id="post.post_id"
                                v-on:click="delpost">
                            <i class="layui-icon layui-icon-delete"></i>删除
                        </button>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
        <!--具体内容盒子结束-->
    </div>
{% endblock %}


